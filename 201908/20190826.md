# Documents

    - TIPS - jsp 

## StringUtils의 isNotBlank 메서드로 웹 요청 리스트 처리하기

https://baekjungho.github.io/jsp-clickadd/ <- 추가 버튼 클릭 시 태그요소 추가 이미지 따오기

위 처럼 태그요소를 추가하는 버튼이 있을 경우, 버튼으로 추가되는 태그는 대부분 LIST의 속성을 가집니다.

즉, JSP로 구현하면 아래와 비슷한 구조입니다.

```html 
<input type="hidden" name="questList[${questIndex}].questNo" id="questNo" value="<c:out value='${quest.questNo }'/>" />
<input type="hidden" name="questList[${questIndex}].content" id="content" value="<c:out value='${quest.content }'/>" />
<input type="hidden" name="questList[${questIndex}].questionNo" id="questionNo" value="<c:out value='${quest.questionNo }'/>" />
```

만약에 버튼을 3번 클릭하여 input text 태그를 3개 생성하고 나서, 가운데 input text를 삭제하는 경우, 자바에서 일반적인 List 개념으로는 List 삭제시 인덱스가 자동으로 조정이 됩니다. 즉, 인덱스 `0 1 2` 가 있을 때 1을 삭제하면, 인덱스2가 1로 바뀝니다. 하지만 JSP에서 위 처럼 강제로 List를 할당하는 경우에는 인덱스 1을 삭제하여도 `0 null 2`로 바뀌게 됩니다.

> 참고 : [자바 ArrayList의 특징](https://baekjungho.github.io/java-collection/#arraylist)

따라서 [StringUtils의 isNotBlank](https://baekjungho.github.io/apache-commonslang/#stringutils)를 사용하여 널값을 체크해서 null이 아닌 값들만 DB에 들어가게끔 만들어야 합니다. 이 로직은 `ServiceImpl`에서 구현하면 됩니다.


```java
private void createXXX(int seq, List<MinwonAddrVo> minwonAddrVoList) {
    if(!minwonAddrVoList.isEmpty()) {
        for (MinwonAddrVo minwonAddrVo : minwonAddrVoList) {
            if(StringUtils.isNotBlank(minwonAddrVo.getUrlTitle()) || StringUtils.isNotBlank(minwonAddrVo.getUrl())) {
                /*
                    StringUtils.isNotBlank로 빈문자열과 널값을 체크하는 이유
                    https://baekjungho.github.io/jsp-weblist/
                    */
                minwonAddrVo.setMinwonSeq(seq);
                minwonAddrRepository.createMinwonAddr(minwonAddrVo);
            }
        }
    }
}
```

위 처럼 ServiceImpl을 구현하게 되면, `input text로 입력받는 속성` (여기에서는 title,과 url)을 null값 체크를 하여, null이 아닌 값들만 DB에 들어가게 하면 됩니다.
