## REDIRECT

```java
    @PostMapping("/delck")
    public String delete(@ModelAttribute("groupReservApplyVo") GroupReservApplyVo groupReservApplyVo,
                         RedirectAttributes redirectAttributes) {
        groupReservApplyService.deleteGroupReservApply(groupReservApplyVo);
        redirectAttributes.addFlashAttribute("message", Message.DELETED.getMsg());
        redirectAttributes.addAttribute("groupReservSeq", groupReservApplyVo.getGroupReservSeq());
        return REDIRECT_URL + groupReservApplyVo.getGroupReservExperienceSeq();
    }
```

redirectAttributes.addFlashAttribute는 delete HandlerMethod가 끝나고 REDIRECT_URL을 통해서 list HandlerMethod로 가게되면서 model에 담긴다. 그리고 list의 HandlerMethod의 수행이 끝나서, list.jsp로 이동하는 순간 소멸되며, model에 담긴 "message" 키값을 통해서 jsp에서 사용할 수 있다. 

redirectAttributes.addFlashAttribute는 url에 파라미터로 붙어서 가지 않기 때문에 보안상 좋다.

redirectAttributes.addAttribute("groupReservSeq", groupReservApplyVo.getGroupReservSeq());를 사용하면 
list HandlerMethod에서 파라미터에 groupReservSeq를 가지는 커맨드 객체가 있으면, 그 커맨드 객체안에 담긴다. 
return REDIRECT하는 순간 URL 파라미터에 groupReservSeq가 붙어다닌다. 

redirectAttributes.addAttribute("mecGroupReservApplyVo", mecGroupReservApplyVo); 할때 객체로는 넘기지 못한다.

String만 가능

## resultMap 

부족해도 오류가 나지는 않음

## jxls

resource 아래에 jxlsTemplate라는 폴더를 만들어 temlplate.xlsx 파일을 관리한다.

```java
    @GetMapping("/{groupReservExperienceSeq}/excel")
    public void jXlsSample (@ModelAttribute("groupReservApplyVo") MecGroupReservApplyVo groupReservApplyVo,
                            @ModelAttribute("groupReservExperienceVo") MecGroupReservExperienceVo groupReservExperienceVo,
                            HttpServletResponse response) throws IOException {
        Resource resource = resourceLoader.getResource("classpath:jXlsTemplate/groupReservApply.xlsx");

        if (!resource.exists()) {
            throw new NotFoundContentsException("해당 파일은 존재하지않습니다.");
        }

        // make test data
        Map<String, Object> beans = new HashMap<>();

        List<MecGroupReservApplyVo> groupReservApplyVoList = groupReservApplyService.findGroupReservApplysByExpSeq(groupReservApplyVo);
        String title = groupReservApplyVoList.get(0).getTitle();
        for(MecGroupReservApplyVo mecGroupReservApplyVo : groupReservApplyVoList) {
            mecGroupReservApplyVo.setRegDate(mecGroupReservApplyVo.getRegDate().substring(0, 10));
            if(StringUtils.isNotBlank(mecGroupReservApplyVo.getModDate())) {
                mecGroupReservApplyVo.setModDate(mecGroupReservApplyVo.getModDate().substring(0, 10));
            }
        }

        MecGroupReservExperienceVo mecGroupReservExperienceVo = groupReservExperienceService.findGroupReservExperience(groupReservExperienceVo);

        beans.put("groupReservApplyVoList", groupReservApplyVoList);
        beans.put("title", title);

        response.setHeader("Set-Cookie", "fileDownload=false; path=/");
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
        response.setHeader("Content-Disposition", String.format("attachment; filename=\"%s\"", URLEncoder.encode(mecGroupReservExperienceVo.getExpDate()+"단체예약참가자", "UTF-8")+".xlsx"));

        Workbook transformedXls = FileUtils.transformXls(resource.getFile(), beans);
        transformedXls.setSheetName(0, "참가자");
        transformedXls.write(response.getOutputStream());
        response.getOutputStream().flush();
    }
```